<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Rental - Owner Dashboard</title>
    <link rel="stylesheet" href="../styles/dashboard.css">
    <script type="module" src="../components/vehicle-card.js"></script>
    <script type="module" src="../components/confirm-modal.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>Owner Dashboard</h1>
                <div class="user-info">
                    <span>Welcome, John Doe</span>
                    <button class="btn btn-secondary" onclick="window.location.href='../index.html'">Logout</button>
                </div>
            </div>
        </header>

        <section class="stats">
            <div class="stat-card">
                <div class="stat-number" id="total-vehicles">0</div>
                <div class="stat-label">Total Vehicles</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="available-vehicles">0</div>
                <div class="stat-label">Available</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="rented-vehicles">0</div>
                <div class="stat-label">Rented</div>
            </div>
        </section>

                <!-- Car Details Modal (overlay) -->
                <div id="car-detail-modal" class="car-detail-modal modal">
                        <div class="car-detail-modal-content">
                                <div class="car-detail-container">
                                        <section class="detail-panel">
                                            <header class="detail-header">
                                                <h2 id="modal-car-title">Car Model — Details</h2>
                                                <div class="actions">
                                                    <button id="modal-edit-btn" class="btn">Edit</button>
                                                    <button id="modal-save-btn" class="btn btn-primary" disabled>Save</button>
                                                </div>
                                            </header>

                                            <form id="modal-car-form" class="car-form" autocomplete="off">
                                                <label>Make <span class="required">*</span>
                                                    <input name="make" id="modal-make" type="text" />
                                                </label>

                                                <label>Model <span class="required">*</span>
                                                    <input name="model" id="modal-model" type="text" />
                                                </label>

                                                <label>Year <span class="required">*</span>
                                                    <input name="year" id="modal-year" type="number" min="1990" max="2026" />
                                                </label>

                                                <label>Price per day (₱) <span class="required">*</span>
                                                    <input name="price" id="modal-price" type="number" step="0.01" />
                                                </label>

                                                <label>Availability
                                                    <select id="modal-availability" name="availability">
                                                        <option value="available">Available</option>
                                                        <option value="rented">Rented</option>
                                                        <option value="maintenance">Maintenance</option>
                                                    </select>
                                                </label>

                                                <label>Location
                                                    <select id="modal-location" name="location">
                                                        <option value="Manila">Manila</option>
                                                        <option value="Quezon City">Quezon City</option>
                                                        <option value="Cebu City">Cebu City</option>
                                                        <option value="Davao City">Davao City</option>
                                                        <option value="Makati">Makati</option>
                                                        <option value="Taguig">Taguig</option>
                                                        <option value="Pasig">Pasig</option>
                                                        <option value="Parañaque">Parañaque</option>
                                                    </select>
                                                </label>

                                                <label>Description
                                                    <textarea id="modal-description" name="description" rows="3"></textarea>
                                                </label>

                                                <div class="form-note" id="modal-save-note" aria-live="polite"></div>
                                            </form>
                                            <div style="margin-top:10px;">
                                                <input id="modal-image-input" type="file" accept="image/*" style="display:none" />
                                                <button id="modal-add-image-btn" class="btn btn-secondary" style="margin-top:6px;">Add / Change Image</button>
                                            </div>
                                        </section>

                                        <section class="image-panel">
                                            <img id="modal-car-image" src="../assets/car-placeholder.jpg" alt="Car image" />
                                        </section>
                                </div>
                                <button class="modal-close-x" onclick="closeCarDetailModal()">✕</button>
                        </div>
                </div>

        <section class="search-section">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search your vehicles..." id="search-input">
                <button class="btn btn-primary" onclick="openAddModal()">+ Add Vehicle</button>
            </div>
        </section>

        <section class="vehicles-grid" id="vehicles-grid">
            <!-- Vehicles will be dynamically added here -->
        </section>
    </div>

    <!-- Add/Edit Vehicle Modal -->
    <div id="vehicle-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">Add New Vehicle</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="vehicle-form">
                    <div class="form-group">
                        <label class="form-label" for="vehicle-name">Vehicle Name <span class="required">*</span></label>
                        <input type="text" id="vehicle-name" class="form-input" placeholder="e.g. Civic, Vios, Fortuner" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="vehicle-brand">Brand <span class="required">*</span></label>
                        <input type="text" id="vehicle-brand" class="form-input" placeholder="e.g. Toyota, Honda, Ford" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="vehicle-year">Year <span class="required">*</span></label>
                            <input type="number" id="vehicle-year" class="form-input" value="2024" min="1990" max="2026" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="vehicle-price">Price/Day (₱) <span class="required">*</span></label>
                            <input type="number" id="vehicle-price" class="form-input" placeholder="e.g. 2500" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="vehicle-availability">Status <span class="required">*</span></label>
                            <select id="vehicle-availability" class="form-input" required>
                                <option value="available">Available</option>
                                <option value="rented">Rented</option>
                                <option value="maintenance">Under Maintenance</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="vehicle-location">Location <span class="required">*</span></label>
                        <select id="vehicle-location" class="form-input" required>
                            <option value="">-- Select Location --</option>
                            <option value="Manila">Manila</option>
                            <option value="Quezon City">Quezon City</option>
                            <option value="Cebu City">Cebu City</option>
                            <option value="Davao City">Davao City</option>
                            <option value="Makati">Makati</option>
                            <option value="Taguig">Taguig</option>
                            <option value="Pasig">Pasig</option>
                            <option value="Parañaque">Parañaque</option>
                            <option value="Caloocan">Caloocan</option>
                            <option value="Antipolo">Antipolo</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="vehicle-seats">Seats <span class="required">*</span></label>
                            <input type="number" id="vehicle-seats" class="form-input" value="5" min="1" max="15" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="vehicle-transmission">Transmission <span class="required">*</span></label>
                            <select id="vehicle-transmission" class="form-input" required>
                                <option value="">-- Select --</option>
                                <option value="Automatic">Automatic</option>
                                <option value="Manual">Manual</option>
                                <option value="CVT">CVT</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="vehicle-type">Type <span class="required">*</span></label>
                            <select id="vehicle-type" class="form-input" required>
                                <option value="">-- Select Type --</option>
                                <option value="Sedan">Sedan</option>
                                <option value="SUV">SUV</option>
                                <option value="Hatchback">Hatchback</option>
                                <option value="Pickup">Pickup Truck</option>
                                <option value="Van">Van / Minivan</option>
                                <option value="MPV">MPV</option>
                                <option value="Crossover">Crossover</option>
                                <option value="Coupe">Coupe</option>
                                <option value="Sports">Sports Car</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="vehicle-fuel">Fuel Type <span class="required">*</span></label>
                            <select id="vehicle-fuel" class="form-input" required>
                                <option value="">-- Select --</option>
                                <option value="Gasoline">Gasoline</option>
                                <option value="Diesel">Diesel</option>
                                <option value="Hybrid">Hybrid</option>
                                <option value="Electric">Electric</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="vehicle-plate">Plate Number <span class="required">*</span></label>
                        <input type="text" id="vehicle-plate" class="form-input" placeholder="e.g. ABC 1234" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="vehicle-color">Color</label>
                        <input type="text" id="vehicle-color" class="form-input" placeholder="e.g. White, Black, Silver">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="vehicle-description">Description</label>
                        <textarea id="vehicle-description" class="form-input" rows="3" placeholder="Any additional details about the vehicle..."></textarea>
                    </div>
                </form>
                <div class="form-group">
                    <label class="form-label">Vehicle Image <span class="required">*</span></label>
                    <input type="file" id="vehicle-image-input" accept="image/*" class="form-input">
                    <div class="image-preview"><img id="vehicle-image-preview" src="../assets/car-placeholder.jpg" alt="Preview"></div>
                </div>
                <p class="required-note"><span class="required">*</span> Required fields</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="saveVehicle()">Save Vehicle</button>
            </div>
        </div>
    </div>

    <script src="../scripts/dashboard.js"></script>
    <!-- Confirmation modal -->
    <confirm-modal id="confirm-modal"></confirm-modal>
</body>
</html>